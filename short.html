<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BERDIYEV_ENGLISH — материалы</title>
  <meta name="theme-color" content="#0d0e11" />

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0d0e11;
      --text: #e9ecf1;
      --muted: #9aa3af;
      --accent: #ff623b;
      --card: #14161b;

      --glass: #cbd0d6;
      --light: #fff;
      --dark: #000;

      --glass-reflex-dark: 2;
      --glass-reflex-light: .35;
      --saturation: 160%;

      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --nav-h: 86px;
    }

    @media (prefers-color-scheme: light){
      :root{ --bg:#E8E8E9; --text:#22243b; --muted:#4a5160; --card:#f3f4f6; --glass-reflex-dark:1; --glass-reflex-light:1; }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family:"DM Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.55;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition: background 400ms cubic-bezier(1,0,0.4,1), color 400ms cubic-bezier(1,0,0.4,1);
    }

    /* Контент */
    header{
      padding:28px 20px 8px;
      max-width:1100px; margin:0 auto;
    }
    header h1{ margin:8px 0 6px; font-size:28px }
    header p { margin:0; color:var(--muted) }

    main{
      max-width:1100px; margin:0 auto;
      padding: 8px 16px calc(var(--nav-h) + 40px + var(--safe-bottom));
    }

    .panel{ display:none; animation: panelIn 340ms cubic-bezier(.2,.7,0,1) both; }
    @keyframes panelIn { from{opacity:0; translate:0 6px} to{opacity:1; translate:0 0} }
    /* Видимость панелей от radio (без JS) */
    /* Радиокнопки размещены перед main */
    #tab-home:checked     ~ main .panel[data-panel="home"],
    #tab-books:checked    ~ main .panel[data-panel="books"],
    #tab-video:checked    ~ main .panel[data-panel="video"],
    #tab-practice:checked ~ main .panel[data-panel="practice"],
    #tab-speak:checked    ~ main .panel[data-panel="speak"]{ display:block; }

    .grid{
      display:grid; gap:16px;
      grid-template-columns: repeat(12, 1fr);
    }
    .col-12{ grid-column: 1 / -1; }
    .col-6 { grid-column: span 6; }
    .col-4 { grid-column: span 4; }
    @media (max-width: 900px){
      .col-6{ grid-column: 1 / -1; }
      .col-4{ grid-column: 1 / -1; }
    }

    .card{
      background: color-mix(in srgb, var(--card) 88%, transparent);
      border-radius:14px;
      padding:16px 16px;
      border:1px solid color-mix(in srgb, var(--text) 10%, transparent);
    }
    .card h3{ margin:0 0 6px; font-size:18px }
    .card p { margin:0 0 10px; color:var(--muted) }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:10px;
      border:1px solid color-mix(in srgb, var(--accent) 55%, transparent);
      color:#fff; background:var(--accent); text-decoration:none; font-weight:600;
      transition: transform .15s ease, filter .15s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ filter:brightness(1.03) }
    .btn:active{ transform:translateY(1px) }

    a.link{
      color: var(--accent); text-decoration-color: color-mix(in srgb, currentColor, transparent 60%);
    }
    a.link:hover{ text-decoration-color: currentColor }

    /* Разделители */
    .hr{
      height:1px; background: color-mix(in srgb, var(--text) 10%, transparent);
      margin: 18px 0;
    }

    /* Нижнее меню — Liquid Glass */
    /* radio для управления вкладками */
    .tabs-input{ position: absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); clip-path:inset(100%); white-space:nowrap; }

    .bottomnav{
      position: fixed;
      left:50%; bottom: calc(10px + var(--safe-bottom));
      translate: -50% 0;
      z-index: 50;
      width: min(760px, 94vw);
      height: var(--nav-h);
      padding: 10px 12px;
      border-radius: 22px;
      background: color-mix(in srgb, var(--glass) 12%, transparent);
      backdrop-filter: blur(10px) saturate(var(--saturation));
      -webkit-backdrop-filter: blur(10px) saturate(var(--saturation));
      box-shadow:
        inset 0 0 0 1px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*10%), transparent),
        inset 2px 3px 0px -2px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*90%), transparent),
        inset -2px -2px 0px -2px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*80%), transparent),
        inset -3px -8px 1px -6px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*60%), transparent),
        inset -0.3px -1px 4px 0px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*12%), transparent),
        inset -1.5px 2.5px 0px -2px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*20%), transparent),
        inset 0px 3px 4px -2px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*20%), transparent),
        0px 6px 16px 0px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*10%), transparent);
      display:flex; align-items:stretch;
    }
    .bottomnav__track{
      position: relative; flex:1;
      border-radius: 16px;
      overflow: visible;
    }
    .bottomnav__track::after{
      content:"";
      position:absolute; left:6px; top:6px; bottom:6px;
      width: calc(100%/5 - 12px);
      border-radius: 14px;
      background: color-mix(in srgb, var(--glass) 36%, transparent);
      box-shadow:
        inset 0 0 0 1px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*10%), transparent),
        inset 2px 1px 0px -1px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*90%), transparent),
        inset -1.5px -1px 0px -1px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*80%), transparent),
        inset -2px -6px 1px -5px color-mix(in srgb, var(--light) calc(var(--glass-reflex-light)*60%), transparent),
        inset -1px 2px 3px -1px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*20%), transparent),
        inset 0px -4px 1px -2px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*10%), transparent),
        0px 3px 6px 0px color-mix(in srgb, var(--dark) calc(var(--glass-reflex-dark)*8%), transparent);
      transform-origin: right;
      transition: left 380ms cubic-bezier(1,0,.4,1), background 400ms cubic-bezier(1,0,.4,1), box-shadow 400ms cubic-bezier(1,0,.4,1);
      animation: bump 460ms ease;
    }
    @keyframes bump { 0%{scale:1} 50%{scale:1.05 1} 100%{scale:1} }

    /* Позиции бегунка через :has(#tab-*:checked) */
    body:has(#tab-home:checked)     .bottomnav__track::after{ left:6px; transform-origin:right; }
    body:has(#tab-books:checked)    .bottomnav__track::after{ left: calc(6px + (100%/5)*1); transform-origin: var(--from, left); }
    body:has(#tab-video:checked)    .bottomnav__track::after{ left: calc(6px + (100%/5)*2); transform-origin: var(--from, left); }
    body:has(#tab-practice:checked) .bottomnav__track::after{ left: calc(6px + (100%/5)*3); transform-origin: var(--from, left); }
    body:has(#tab-speak:checked)    .bottomnav__track::after{ left: calc(6px + (100%/5)*4); transform-origin: left; }

    .bottomnav__list{
      margin:0; padding:0; list-style:none;
      height:100%; display:grid; grid-template-columns: repeat(5, 1fr); gap:0;
    }
    .bottomnav__btn{
      position:relative;
      display:flex; align-items:center; justify-content:center;
      color: var(--text);
      cursor:pointer; user-select:none;
      border-radius:14px;
      transition: color .2s ease, transform .2s ease;
    }
    .bottomnav__btn:hover{ color: var(--accent) }
    .bottomnav__btn svg{ width:28px; height:28px; display:block; transition: transform .25s cubic-bezier(.5,0,0,1) }
    .bottomnav__btn:hover svg{ transform: translateY(-2px) }

    /* Активная — вернуть размер и окрасить */
    body:has(#tab-home:checked)     .bottomnav__btn[for="tab-home"],
    body:has(#tab-books:checked)    .bottomnav__btn[for="tab-books"],
    body:has(#tab-video:checked)    .bottomnav__btn[for="tab-video"],
    body:has(#tab-practice:checked) .bottomnav__btn[for="tab-practice"],
    body:has(#tab-speak:checked)    .bottomnav__btn[for="tab-speak"]{
      color: var(--text);
    }

    /* Хлебные заголовки в панелях */
    .panel h2{ margin: 8px 0 12px; font-size:22px }
    .lead{ font-size:16px; color:var(--muted); margin: 6px 0 14px }

    /* Карточки-ссылки */
    .linkset{ display:flex; flex-wrap:wrap; gap:10px; }
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:12px;
      background: color-mix(in srgb, var(--accent) 10%, transparent);
      border:1px solid color-mix(in srgb, var(--accent) 35%, transparent);
      color: var(--text); text-decoration:none; font-weight:600;
      transition: filter .15s ease, transform .15s ease;
    }
    .tag:hover{ filter:brightness(1.04) }
    .tag:active{ transform: translateY(1px) }

    /* Поддержка */
    .support{
      display:flex; flex-direction:column; gap:10px;
      padding:14px 16px; border-radius:14px;
      border:1px dashed color-mix(in srgb, var(--accent) 40%, transparent);
      background: color-mix(in srgb, var(--accent) 10%, transparent);
    }

    @media (prefers-reduced-motion: reduce){
      .bottomnav__track::after, .bottomnav__btn svg, .panel{ animation:none !important; transition:none !important }
    }
  </style>
</head>
<body>

  <!-- Радио для вкладок (без JS) -->
  <input class="tabs-input" type="radio" id="tab-home"     name="tab" value="home" checked>
  <input class="tabs-input" type="radio" id="tab-books"    name="tab" value="books">
  <input class="tabs-input" type="radio" id="tab-video"    name="tab" value="video">
  <input class="tabs-input" type="radio" id="tab-practice" name="tab" value="practice">
  <input class="tabs-input" type="radio" id="tab-speak"    name="tab" value="speak">

  <header>
    <h1>BERDIYEV_ENGLISH</h1>
    <p>Лучшие бесплатные сайты, боты и приложения для изучения английского</p>
  </header>

  <main>
    <!-- HOME -->
    <section class="panel" data-panel="home">
      <h2>О проекте</h2>
      <p class="lead">Собрал в одном месте удобные и бесплатные инструменты: боты для ЕГЭ/ОГЭ/IELTS/TOEFL, чтение, видео-уроки, тренажёры грамматики, разговорная практика и изучение слов.</p>

      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Боты от Бердиева А.</h3>
            <p>Ваш личный репетитор: объяснит, составит план, проверит Speaking/Writing.</p>
            <div class="linkset">
              <a class="tag" href="https://t.me/EGE_ENGLISH_GPT_bot" target="_blank">EGE Assistant</a>
              <a class="tag" href="https://t.me/OGE_ENG_HELPER_BOT" target="_blank">OGE Helper</a>
              <a class="tag" href="https://t.me/IELTS_berdiyev_bot" target="_blank">IELTS Expert</a>
              <a class="tag" href="https://t.me/TOBEENG_TOEFL_IBT_BOT" target="_blank">TOEFL iBT Expert</a>
              <a class="tag" href="https://t.me/tobeeng_ege_bot" target="_blank">ЕГЭ материалы</a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>Бесплатные курсы</h3>
            <p>Подборки плейлист-курсов и курс «Английский с нуля».</p>
            <div class="linkset">
              <a class="tag" href="https://t.me/to_be_eng/190" target="_blank">Лучшие курсы (TG)</a>
              <a class="tag" href="https://lingust.ru/english/english-lessons" target="_blank">Lingust — с 0</a>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="support">
            <strong>Поддержите проект</strong>
            <div class="linkset">
              <a class="btn" href="https://pay.cloudtips.ru/p/8f56d7d3" target="_blank">Поддержать</a>
              <a class="btn" href="https://t.me/+NvMX2DrTa3w1NTVi" target="_blank" style="background:#1c9df2;border-color:#1c9df2">Telegram-канал</a>
              <a class="btn" href="mailto:abdurrahimberdiev@gmail.com?subject=Здравствуйте , хочу записать к вам на занятие" target="_blank" style="background:#00b894;border-color:#00b894">Связаться</a>
            </div>
          </div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="grid">
        <div class="col-4">
          <div class="card">
            <h3>Читать</h3>
            <p>Книги и новости на английском, с переводом и упражнениями.</p>
            <a class="link" href="#" onclick="document.getElementById('tab-books').checked=true; return false;">Перейти к чтению →</a>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <h3>Видео</h3>
            <p>Фильмы/сериалы, тренировка аудирования, мини-уроки лексики.</p>
            <a class="link" href="#" onclick="document.getElementById('tab-video').checked=true; return false;">Перейти к видео →</a>
          </div>
        </div>
        <div class="col-4">
          <div class="card">
            <h3>Практика</h3>
            <p>Грамматика и перевод предложений, чтобы отточить навыки.</p>
            <a class="link" href="#" onclick="document.getElementById('tab-practice').checked=true; return false;">Перейти к практике →</a>
          </div>
        </div>
      </div>
    </section>

    <!-- BOOKS -->
    <section class="panel" data-panel="books">
      <h2>Что читать</h2>
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Книги в оригинале и адаптированные</h3>
            <div class="linkset">
              <a class="tag" href="https://2books.su/" target="_blank">2books.su</a>
              <a class="tag" href="https://linguasaur.com/ru/en/books" target="_blank">Linguasaur</a>
              <a class="tag" href="https://anylang.net/ru/books/en" target="_blank">AnyLang</a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>Новости с задачами</h3>
            <div class="linkset">
              <a class="tag" href="https://breakingnewsenglish.com/" target="_blank">Breaking News English</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIDEO -->
    <section class="panel" data-panel="video">
      <h2>Видео: фильмы, аудирование и лексика</h2>

      <div class="card">
        <h3>Фильмы и сериалы на английском</h3>
        <div class="linkset">
          <a class="tag" href="https://inoriginal.net/" target="_blank">Inoriginal</a>
          <a class="tag" href="https://solarmovies.ms/home" target="_blank">Solarmovies</a>
          <a class="tag" href="https://hdrezka.fans/" target="_blank">HDRezka</a>
          <a class="tag" href="https://go.zetflix-online.lol/" target="_blank">Zetflix</a>
        </div>
      </div>

      <div class="hr"></div>

      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Научиться понимать на слух</h3>
            <div class="linkset">
              <a class="tag" href="https://listeninenglish.com/index.php" target="_blank">Listen in English</a>
              <a class="tag" href="https://en.islcollective.com/english-esl-video-lessons/search" target="_blank">iSLCollective (видео)</a>
              <a class="tag" href="http://www.tubequizard.com/" target="_blank">TubeQuizard</a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>Увеличить словарный запас (мини-уроки)</h3>
            <div class="linkset">
              <a class="tag" href="https://ed.ted.com/lessons" target="_blank">TED-Ed</a>
              <a class="tag" href="https://www.bbc.co.uk/learningenglish/english/features/6-minute-english" target="_blank">6 Minute English</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRACTICE -->
    <section class="panel" data-panel="practice">
      <h2>Практиковать грамматику и переводить</h2>
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Грамматика</h3>
            <div class="linkset">
              <a class="tag" href="https://test-english.com/grammar-points/" target="_blank">Test-English</a>
              <a class="tag" href="https://lingust.ru/english/grammar" target="_blank">Lingust — грамматика</a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>Перевод предложений</h3>
            <div class="linkset">
              <a class="tag" href="https://berdiyev-english.github.io/resources/collect.html" target="_blank">RU → EN тренажёр</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SPEAK -->
    <section class="panel" data-panel="speak">
      <h2>Разговорная практика и слова</h2>
      <div class="grid">
        <div class="col-6">
          <div class="card">
            <h3>Практика разговорной речи</h3>
            <div class="linkset">
              <a class="tag" href="https://www.hellotalk.com/ru" target="_blank">HelloTalk</a>
              <a class="tag" href="https://character.ai/" target="_blank">Character.AI (EN)</a>
              <a class="tag" href="https://t.me/Tobeeng_GPT_bot" target="_blank">TO BE ENG GPT</a>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card">
            <h3>Учить слова</h3>
            <div class="linkset">
              <a class="tag" href="https://t.me/noword_eng_bot" target="_blank">NO WORD (TG)</a>
              <a class="tag" href="https://t.me/English_Mnemo_Bot" target="_blank">EnglSpace (ассоциации)</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Нижнее меню -->
  <nav class="bottomnav" role="tablist" aria-label="Нижнее меню">
    <div class="bottomnav__track">
      <ul class="bottomnav__list">
        <li><label class="bottomnav__btn" for="tab-home"     role="tab" aria-controls="home"     aria-label="Домой" title="Домой">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 10.5 12 4l8 6.5V20a1 1 0 0 1-1 1h-4.5a1 1 0 0 1-1-1v-3.5h-3V20a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9.5Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/></svg>
        </label></li>
        <li><label class="bottomnav__btn" for="tab-books"    role="tab" aria-controls="books"    aria-label="Книги" title="Книги">
          <svg viewBox="0 0 24 24" fill="none"><path d="M6 5.5h7.5a2.5 2.5 0 0 1 2.5 2.5V19H8.5A2.5 2.5 0 0 1 6 16.5V5.5Z" stroke="currentColor" stroke-width="1.6"/><path d="M6 14.5h12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        </label></li>
        <li><label class="bottomnav__btn" for="tab-video"    role="tab" aria-controls="video"    aria-label="Видео" title="Видео">
          <svg viewBox="0 0 24 24" fill="none"><rect x="3.5" y="6.5" width="12" height="11" rx="2" stroke="currentColor" stroke-width="1.6"/><path d="M16.5 10.5 21 8.5v7l-4.5-2v-3Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/></svg>
        </label></li>
        <li><label class="bottomnav__btn" for="tab-practice" role="tab" aria-controls="practice" aria-label="Практика" title="Практика">
          <svg viewBox="0 0 24 24" fill="none"><path d="M5 6.5h9.5a2.5 2.5 0 0 1 2.5 2.5v8.5H7.5A2.5 2.5 0 0 1 5 15V6.5Z" stroke="currentColor" stroke-width="1.6"/><path d="M15.5 9l3.5-3.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><path d="M18.3 4.7 20 6.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        </label></li>
        <li><label class="bottomnav__btn" for="tab-speak"    role="tab" aria-controls="speak"    aria-label="Разговор" title="Разговор">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4.5 10.5c0-3.5 3-6 7.5-6s7.5 2.5 7.5 6-3 6-7.5 6c-1.3 0-2.6-.2-3.7-.7L5 17.5l.9-2.3a7.8 7.8 0 0 1-1.4-4.7Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/></svg>
        </label></li>
      </ul>
    </div>
  </nav>

  <!-- SVG фильтр (легкий) для приятного «liquid» ощущения (без тяжёлых base64) -->
  <svg width="0" height="0" style="position:absolute">
    <filter id="liquid" primitiveUnits="objectBoundingBox">
      <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" seed="2" stitchTiles="stitch" result="noise"/>
      <feGaussianBlur in="SourceGraphic" stdDeviation="0.04" result="blur"/>
      <feDisplacementMap in="blur" in2="noise" scale="0.5" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </svg>
<script> (function(){ const STORAGE_KEY = 'tab-active'; const ids = ['home','books','video','practice','speak']; const radios = ids.map(id => document.getElementById(`tab-${id}`)); const labels = ids.map(id => document.querySelector(`.bottomnav__btn[for="tab-${id}"]`)); const track = document.querySelector('.bottomnav__track'); // Fallback для Firefox/старых: если нет :has — управляем позицией бегунка через CSS-переменную const hasHas = CSS && CSS.supports && CSS.supports('selector(:has(*))'); if (!hasHas) { const style = document.createElement('style'); style.textContent = ` .bottomnav__track::after{ left: calc(6px + (100%/5)*var(--pos, 0)) !important; } `; document.head.appendChild(style); } // Обновление aria-selected для доступности function updateAria(idx) { labels.forEach((lb,i)=> lb && lb.setAttribute('aria-selected', i===idx ? 'true':'false')); } function setFrom(prev, next) { // Направление "распухания" бегунка: вправо => origin: left, влево => right const dir = (typeof prev === 'number' && next > prev) ? 'left' : 'right'; document.documentElement.style.setProperty('--from', dir); } function setKnobPos(idx){ if (!hasHas && track) { track.style.setProperty('--pos', idx); } } // Применить вкладку программно function activate(value, opts = {save:true, scroll:true, hash:true}) { const idx = ids.indexOf(value); if (idx === -1) return; const prev = radios.findIndex(r => r.checked); radios[idx].checked = true; setFrom(prev, idx); setKnobPos(idx); updateAria(idx); if (opts.save) { try { localStorage.setItem(STORAGE_KEY, value); } catch(e){} } if (opts.hash) { history.replaceState(null, '', `#${value}`); } if (opts.scroll) { const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches; const topEl = document.querySelector('header'); if (topEl) topEl.scrollIntoView({behavior: reduce? 'auto':'smooth', block:'start'}); else window.scrollTo({top:0, behavior: reduce? 'auto':'smooth'}); } } // Навешиваем обработчики на radio let prevIndex = radios.findIndex(r => r.checked); radios.forEach((r, i) => { r.addEventListener('change', () => { setFrom(prevIndex, i); prevIndex = i; setKnobPos(i); updateAria(i); try { localStorage.setItem(STORAGE_KEY, ids[i]); } catch(e){} history.replaceState(null, '', `#${ids[i]}`); const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches; const topEl = document.querySelector('header'); if (topEl) topEl.scrollIntoView({behavior: reduce? 'auto':'smooth', block:'start'}); }); }); // Инициализация: hash > localStorage > текущее let initial = (location.hash || '').replace('#',''); if (!ids.includes(initial)) { try { initial = localStorage.getItem(STORAGE_KEY) || initial; } catch(e){} } if (ids.includes(initial)) { const idx = ids.indexOf(initial); radios[idx].checked = true; prevIndex = idx; history.replaceState(null, '', `#${initial}`); setKnobPos(idx); updateAria(idx); } else { const current = ids[prevIndex] || 'home'; history.replaceState(null, '', `#${current}`); setKnobPos(prevIndex); updateAria(prevIndex); } // Делегирование для ссылок вида <a data-goto="books"> document.addEventListener('click', (e) => { const go = e.target.closest('[data-goto]'); if (!go) return; e.preventDefault(); const val = go.getAttribute('data-goto'); if (ids.includes(val)) activate(val); }); })(); </script>
</body>
</html>
